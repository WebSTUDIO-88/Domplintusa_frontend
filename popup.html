<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Попап</title>

    <link rel="stylesheet" href="style.css"/>

</head>
<body>

<div class="loader-frame __loading">
    <div class="loader-body">
        <div>
            <svg class="filter" version="1.1">
                <defs>
                    <filter id="gooeyness">
                        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                        <feColorMatrix in="blur" mode="matrix"
                            values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -10" result="gooeyness" />
                        <feComposite in="SourceGraphic" in2="gooeyness" operator="atop" />
                    </filter>
                </defs>
            </svg>
            <div class="dots">
                <div class="dot mainDot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
</div>

<div class = "overlay"></div>

<div class="popup popup-sale">
    <a class="close1" href="#"></a>
    <div id = "form">
        <p class="head">Купить в один клик</p>
        <div class="wrap">
            <div class="left">
                <p class="remark">Заполните данные для заказа</p>
                <form action="" method = "POST">
                    <input type="text" placeholder="Имя*"/>
                    <input type="text" placeholder="E-mail*"/>
                    <input type="text" class = "phone" placeholder="Телефон*"/>
                    <textarea placeholder="Сообщение"></textarea>
                    <label id = "checklabel" for="check">
                        <input id = "check" type="checkbox" />
                        <p>*Я согласен на обработку персональных данных</p>
                    </label>
                    <a id = "saleOneClick" href="javascript:void(0);" class = "submit">Купить в 1 клик</a>
                </form>
            </div>
            <div class="right">
                <img id = "rotate1" class = "circle" src="images/circle1.svg" alt=""/>
                <div class="card">
                    <img src="images/tovar.jpg" alt=""/>
                    <p class="name">Плинтус из дуба венера</p>
                    <p class="price">От 550,00 Р</p>
                </div>
            </div>
        </div>
    </div>
    <div id = "confirm">
        <div class="wrap">
            <div class="left">
                <p class="head">Заявка принята</p>
                <p class="remark">Заполните данные для заказа</p>
            </div>
            <div class="right">
                <img id = "rotate2" class = "circle" src="images/circle1.svg" alt=""/>
                <div class="card">
                    <img src="images/tovar.jpg" alt=""/>
                    <p class="name">Плинтус из дуба венера</p>
                    <p class="price">От 550,00 Р</p>
                </div>
            </div>
        </div>    
    </div>
</div>

<div class="float__menu">
    <div class="top">
        <div class="left">
            <a href="/" class="logo"></a>
        </div>    
        <div class="right">
            <div class="smallBasket">
                <a href=""><span id = "basketCnt1" class = "basketCnt">0</span></a>
            </div>
            <button id = "hideMenu" class = "menu__mob"></button>
        </div>
    </div>
    <div class="bottom">
        <ul>
            <li><a href="">Каталог</a></li>
            <li><a href="">Оплата</a></li>
            <li><a href="">Доставка</a></li>
            <li><a href="">Контакты</a></li>
        </ul>
        <ul>
            <li><a href="">Telegram</a></li>
            <li><a href="">WhatsApp</a></li>
            <li><a href="">Vkontakte</a></li>
            <li><a href="">Instagram</a></li>
        </ul>
        <div class="contacts">
            <p>МО, г. Щелково, ул. Браварская д. 9</p>
            <a href="tel:+79260420709">+7 (926) 042-07-09</a>
            <a href="tel:+74959757531">+7 (495) 975-75-31</a>
        </div>
    </div>
</div>

<header class="header">
    <div class="top">
        <div class="container">
            <div class="left">
                <ul>
                    <li><a href="">Telegram</a></li>
                    <li><a href="">Whatsapp</a></li>
                    <li><a href="">Vkontakte</a></li>
                    <li><a href="">Instagram</a></li>
                </ul>
            </div>
            <div class="center">
                <p>МО, г. Щелково, ул. Браварская д. 9</p>
            </div>
            <div class="right">
                <p><a href="tel:+79260420709">+7 (926) 042-07-09</a>  |  <a href = "tel:+74959757531">+7 (495) 975-75-31</a></p>
            </div>
        </div>
    </div>
    <div class="bottom">
        <div class="container">
            <div class="left"><a href="/"></a></div>
            <div class="center">
                <ul>
                    <li><a href="">Каталог</a></li>
                    <li><a href="">Оплата</a></li>
                    <li><a href="">Доставка</a></li>
                    <li><a href="">Контакты</a></li>
                </ul>
            </div>
            <div class="right">
                <button id = "showMenu" class = "menu__mob"></button>
                <div class="smallBasket">
                    <a href=""><span class = "basketAnc">Корзина</span> <span id = "basketCnt" class = "basketCnt">0</span></a>
                </div>
            </div>
        </div>
    </div>
</header>    

<section class="buttons">
    <div class="container">
        <a popup-target = "popup-sale" href = "javascript:void(0);">Заказать в один клик</a>
    </div>
</section>

<footer class="footer">
    <div class="container">
        <div class="left">
            <a class = "logo" href=""></a>
            <p>Все права защищены &copy; 2021<a href = "">Политика конфиденциальности</a></p>
        </div>
        <div class="right">
            <ul>
                <li><a href="">Каталог</a></li>
                <li><a href="">Оплата</a></li>
                <li><a href="">Доставка</a></li>
                <li><a href="">Сотрудничество</a></li>
                <li><a href="">Контакты</a></li>
            </ul>
            <ul>
                <li><a href="">Telegram</a></li>
                <li><a href="">WhatsApp</a></li>
                <li><a href="">Vkontakte</a></li>
                <li><a href="">Instagram</a></li>
            </ul>
        </div>
    </div>
</footer>

<script type = "text/javascript" src = "js/jquery.min.js"></script>

<script type = "text/javascript">
    var rect = document.getElementById('rotate1')
    var rect2 = document.getElementById('rotate2')
    var a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0, angle = 0, currentAngle

    function getAngleToRAD(){
      if(angle === 360){
        angle = 0;
      }

      return angle++ * Math.PI / 360;
    }
    

    function update(){
      currentAngle = getAngleToRAD();

      rect.style.transform = 'matrix(' + Math.cos(currentAngle) + ',' + Math.sin(currentAngle) + ',' + -Math.sin(currentAngle) + ',' + Math.cos(currentAngle) + ',' + tx + ',' + tx + ')'
      rect2.style.transform = 'matrix(' + Math.cos(currentAngle) + ',' + Math.sin(currentAngle) + ',' + -Math.sin(currentAngle) + ',' + Math.cos(currentAngle) + ',' + tx + ',' + tx + ')'
      window.requestAnimationFrame(update);
    }

    update();
    /*--------------------------------------------*/
    const btnShow = document.getElementById('showMenu')
    const btnHide = document.getElementById('hideMenu')
    const menu = document.querySelector('.float__menu')

    btnShow.addEventListener('click',function(){
        menu.style.left = '0'
    })

    btnHide.addEventListener('click',function(){
        menu.style.left = '-100%'
    })
    /*--------------------------------------------*/
    const window_height = (window.innerHeight ? window.innerHeight : (document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.offsetHeight))
    
    const elements = document.querySelectorAll('.label')
    
    window.addEventListener('scroll', function() {

        const top = document.body.scrollTop
        const find = false

        elements.forEach(function(el) {

            const el_top = el.offsetTop
            //if(el_top > top && ((el.clientHeight + el_top) < (top + window_height))) {
                el.style.backgroundSize = "1570px 1px"
            //}

        })

    })


    /*----------------------------------------------------*/
    window.addEventListener("DOMContentLoaded", function() {
        [].forEach.call( document.querySelectorAll('.phone'), function(input) {
        var keyCode;
        function mask(event) {
            event.keyCode && (keyCode = event.keyCode);
            var pos = this.selectionStart;
            if (pos < 3) event.preventDefault();
            var matrix = "+7 (___) ___ ____",
                i = 0,
                def = matrix.replace(/\D/g, ""),
                val = this.value.replace(/\D/g, ""),
                new_value = matrix.replace(/[_\d]/g, function(a) {
                    return i < val.length ? val.charAt(i++) || def.charAt(i) : a
                });
            i = new_value.indexOf("_");
            if (i != -1) {
                i < 5 && (i = 3);
                new_value = new_value.slice(0, i)
            }
            var reg = matrix.substr(0, this.value.length).replace(/_+/g,
                function(a) {
                    return "\\d{1," + a.length + "}"
                }).replace(/[+()]/g, "\\$&");
            reg = new RegExp("^" + reg + "$");
            if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) this.value = new_value;
            if (event.type == "blur" && this.value.length < 5)  this.value = ""
        }

        input.addEventListener("input", mask, false);
        input.addEventListener("focus", mask, false);
        input.addEventListener("blur", mask, false);
        input.addEventListener("keydown", mask, false)

    });

    });

    window.addEventListener("load", function () {
        document.querySelector('.loader-frame').classList.remove('__loading')
    })

    document.getElementById('checklabel').addEventListener('change', function(){
        const check = document.getElementById('check')

        if(check.checked === false){
            this.classList.remove('checked')
        }else{
            this.classList.add('checked')
        }
    })

    $('[popup-target]').click(function(e) {
        var el = $(this);
        var target = el.attr('popup-target');

        $('.overlay').fadeIn(200, function(){
            $('.popup.'+target).fadeIn(200);
            var top = document.documentElement.clientHeight / 2 - $('.popup.'+target).height() / 2 //+ $(window).scrollTop();
            var left = $('body').width() / 2 - $('.popup.'+target).width() / 2;
            left = left - 30;
            $('.popup.'+target).css('top', top).css('left', left);
        })


        return false;
    });

    $('.overlay, .close1, .closelink').click(function(e) {
        var popup = $('.popup:visible');
        popup.fadeOut(200, function(){
            $('.overlay').fadeOut(200);
        });
        return false;
    });

    function keyExit(e){
        if(e.keyCode == 27){

            var popup = $('.popup:visible')
            popup.fadeOut(200, function(){
                $('.overlay').fadeOut(200)
            })
        }
    }

    addEventListener("keydown", keyExit)

    document.getElementById('saleOneClick').addEventListener('click', function(){
        document.getElementById('form').style.display = "none"
        document.getElementById('confirm').style.display = "block"
    })
</script>

</body>
</html>